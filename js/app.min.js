window.addEventListener('DOMContentLoaded', () => {
	_icon_menu()

	let imagePreview = document.querySelectorAll('.image-preview')
	imagePreview.forEach(element => {
		
		$(element).bind( "touchstart", function(e){
			e.path[1].classList.toggle('_active')
		} );
		element.addEventListener('click', function (e) {
			e.path[1].classList.toggle('_active')
		})
	});


	let galerie = document.querySelectorAll(".galerie")
	galerie.forEach(element => {
		
		$(element).bind( "touchstart", function(e){
			e.path[1].classList.toggle('_active')
			element.classList.toggle('_active')
		} );
		element.addEventListener('click', function (e) {
			e.path[1].classList.toggle('_active')
			element.classList.toggle('_active')
		})
	});

	let node = document.querySelectorAll(".main-item");
	let popup = document.querySelector('.popup__buttons')
	node.forEach(element => {
		element.addEventListener('dblclick', function (e) {
			
		})
	});

	document.addEventListener('click', function (e) {
		if(e.path[0].classList[0] != 'popup__buttons')
		{
			popup.classList.remove('_active')
		}
	})

	let rightMain = document.querySelector('.right-bar__main')
	rightMain.addEventListener('scroll', function (e) {
		popup.classList.remove('_active')
	})

	rightMain.addEventListener('dblclick', function (e) {
		if(e.target.className == 'main-item__text' || 
		e.target.className == 'main-item__file file' ||
		e.target.className == 'main-item__images' || 
		e.target.className == 'main-item__image _ibg' || 
		e.target.className == 'image-preview' ){
			
		popup.classList.toggle('_active')
		popup.style.cssText = `
			top: ${e.layerY + $(rightMain).scrollTop()}px;
			left: ${e.layerX}px;
		`;
		}
	})
});

window.onload = function () {
	//_smooth_scrolling()
}

function _icon_menu() {
	let iconMenu = document.querySelector('.icon-menu')
	if (iconMenu != null) {
		let dashboard = document.querySelector('.dashboard__left-bar')
		iconMenu.addEventListener('click', function (e) {
			iconMenu.classList.toggle('_active')
			dashboard.classList.toggle('_active')
		})
	}
}

//для подключения необходимо прописать инклюд в этом файле и вызвать функцию в script.js