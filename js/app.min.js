window.addEventListener('DOMContentLoaded', () => {
	_icon_menu()

	let imagePreview = $('.image-preview').toArray();
	jQuery.each(imagePreview, (item, i) => {
		$(i).click(function(e){
			$(i).closest('.main-item__image').toggleClass('_active')
		});
	})

	
	let galerie = $('.galerie').toArray();
	jQuery.each(galerie, (item, i) => {
		$(i).click(function(e){
			$(i).closest('.main-item__image').toggleClass('_active')
			$(i).toggleClass('_active')
		});
	})



	let node = $('.main-item').toArray();
	let popup = $('.popup__buttons');

	jQuery.each(node, (item, i) => {
		$(i).dblclick(function(e){
			$(popup).toggleClass('_active')
			
			var elm = $('.right-bar__main');
			var xPos = e.pageX - elm.offset().left;
			var yPos = e.pageY - elm.offset().top;
	
			popup.css({"left":`${xPos}px`,"top":`${yPos + elm.scrollTop()}px`});
		});
	})

	$('.wrapper').click(function(e){
		if(e.target.classList.value != 'popup__buttons _active'){
			$(popup).removeClass('_active')
		}
	});
});

function _icon_menu() {
	let iconMenu = document.querySelector('.icon-menu')
	if (iconMenu != null) {
		let dashboard = document.querySelector('.dashboard__left-bar')
		iconMenu.addEventListener('click', function (e) {
			iconMenu.classList.toggle('_active')
			dashboard.classList.toggle('_active')
		})
	}
}

//для подключения необходимо прописать инклюд в этом файле и вызвать функцию в script.js